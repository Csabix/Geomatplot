<svg id="canvas" xmlns="http://www.w3.org/2000/svg" onload="makeDraggable(evt)">

<style>
    .hover {
        fill: #a9a9a9;
    }

    .draggable {
        cursor: move;
    }
</style>
<g id="viewport">

<line id="seg1" x1="250" y1="500" x2="875" y2="500" stroke="rgb(0,0,256)" stroke-width="2" />
<line id="seg2" x1="875" y1="500" x2="625" y2="156.25" stroke="rgb(0,0,256)" stroke-width="2" />
<line id="seg3" x1="625" y1="156.25" x2="250" y2="500" stroke="rgb(0,0,256)" stroke-width="2" />
<circle id="D" r="5" cx="750" cy="328.125" fill="rgb(0,0,0)" />
<line id="seg4" x1="250" y1="500" x2="750" y2="328.125" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="10, 7" />
<circle id="E" r="5" cx="437.5" cy="328.125" fill="rgb(0,0,0)" />
<line id="seg5" x1="875" y1="500" x2="437.5" y2="328.125" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="10, 7" />
<circle id="F" r="5" cx="562.5" cy="500" fill="rgb(0,0,0)" />
<line id="seg6" x1="625" y1="156.25" x2="562.5" y2="500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="10, 7" />
<circle id="S" r="5" cx="583.3333" cy="385.4167" fill="rgb(0,0,0)" />
<line id="perpbi11" x1="562.5" y1="62500000812.5" x2="562.5" y2="6250812.5" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi12" x1="562.5" y1="6250812.5" x2="562.5" y2="812.5" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi13" x1="562.5" y1="812.5" x2="562.5" y2="187.5" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi14" x1="562.5" y1="187.5" x2="562.5" y2="-6249187.5" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi15" x1="562.5" y1="-6249187.5" x2="562.5" y2="-62499999187.5" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<line id="perpbi21" x1="34375000921.875" y1="-24999999796.875" x2="3438421.875" y2="-2499796.875" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi22" x1="3438421.875" y1="-2499796.875" x2="921.875" y2="203.125" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi23" x1="921.875" y1="203.125" x2="578.125" y2="453.125" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi24" x1="578.125" y1="453.125" x2="-3436578.125" y2="2500203.125" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi25" x1="-3436578.125" y1="2500203.125" x2="-34374999078.125" y2="25000000203.125" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<line id="perpbi31" x1="-34374999734.375" y1="-37499999859.375" x2="-3437234.375" y2="-3749859.375" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi32" x1="-3437234.375" y1="-3749859.375" x2="265.625" y2="140.625" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi33" x1="265.625" y1="140.625" x2="609.375" y2="515.625" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi34" x1="609.375" y1="515.625" x2="3437765.625" y2="3750140.625" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpbi35" x1="3437765.625" y1="3750140.625" x2="34375000265.625" y2="37500000140.625" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<circle id="center1" r="5" cx="562.5" cy="464.4886" fill="rgb(0,0,0)" />
<circle id="dist1" r="0" cx="0" cy="0" value="314.5112" visibility="hidden" />
<circle id="circ1" r="314.5112" cx="562.5" cy="464.4886" fill="none" stroke-width="2" stroke="rgb(256,0,256)" />

<line id="angbi11" x1="99260731979.6904" y1="50546005768.9493" x2="9926948.1105" y2="5055100.5269" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi12" x1="9926948.1105" y1="5055100.5269" x2="875" y2="500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi13" x1="875" y1="500" x2="-117.6073" y2="-5.4601" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi14" x1="-117.6073" y1="-5.4601" x2="-9925198.1105" y2="-5054100.5269" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi15" x1="-9925198.1105" y1="-5054100.5269" x2="-99260730229.6904" y2="-50546004768.9493" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<line id="angbi21" x1="9311403282.8559" y1="-92778794395.0334" x2="931765.2658" y2="-9277723.2051" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi22" x1="931765.2658" y1="-9277723.2051" x2="625" y2="156.25" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi23" x1="625" y1="156.25" x2="531.886" y2="1084.0379" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi24" x1="531.886" y1="1084.0379" x2="-930515.2658" y2="9278035.7051" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi25" x1="-930515.2658" y1="9278035.7051" x2="-9311402032.8559" y2="92778794707.5334" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<line id="angbi31" x1="-108572133512.5463" y1="42232789782.3341" x2="-10856963.3763" y2="4223778.9282" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi32" x1="-10856963.3763" y1="4223778.9282" x2="250" y2="500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi33" x1="250" y1="500" x2="1335.7213" y2="77.6721" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi34" x1="1335.7213" y1="77.6721" x2="10857463.3763" y2="-4222778.9282" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="angbi35" x1="10857463.3763" y1="-4222778.9282" x2="108572134012.5463" y2="-42232788782.3341" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />

<circle id="O" r="5" cx="604.3336" cy="362.17" fill="rgb(0,0,0)" />
<circle id="dist2" r="0" cx="0" cy="0" value="137.83" visibility="hidden" />
<circle id="circ2" r="137.83" cx="604.3336" cy="362.17" fill="none" stroke-width="2" stroke="rgb(0,256,256)" />
<line id="perpln11" x1="34375000250" y1="-24999999500" x2="3437750" y2="-2499500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln12" x1="3437750" y1="-2499500" x2="250" y2="500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln13" x1="250" y1="500" x2="-93.75" y2="750" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln14" x1="-93.75" y1="750" x2="-3437250" y2="2500500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln15" x1="-3437250" y1="2500500" x2="-34374999750" y2="25000000500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<line id="perpln21" x1="-34374999125" y1="-37499999500" x2="-3436625" y2="-3749500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln22" x1="-3436625" y1="-3749500" x2="875" y2="500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln23" x1="875" y1="500" x2="1218.75" y2="875" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln24" x1="1218.75" y1="875" x2="3438375" y2="3750500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln25" x1="3438375" y1="3750500" x2="34375000875" y2="37500000500" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />
<line id="perpln31" x1="625" y1="62500000156.25" x2="625" y2="6250156.25" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln32" x1="625" y1="6250156.25" x2="625" y2="156.25" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln33" x1="625" y1="156.25" x2="625" y2="-468.75" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln34" x1="625" y1="-468.75" x2="625" y2="-6249843.75" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" /><line id="perpln35" x1="625" y1="-6249843.75" x2="625" y2="-62499999843.75" stroke="rgb(0,0,0)" stroke-width="1" stroke-dasharray="1, 3" />

<circle id="M" r="5" cx="625" cy="227.2727" fill="rgb(0,0,0)" />
<line id="seg7" x1="625" y1="227.2727" x2="562.5" y2="464.4886" stroke="rgb(256,0,0)" stroke-width="1" />

<circle id="A" class="draggable" r="5" cx="250" cy="500" fill="rgb(0,0,256)" />
<circle id="B" class="draggable" r="5" cx="875" cy="500" fill="rgb(0,0,256)" />
<circle id="C" class="draggable" r="5" cx="625" cy="156.25" fill="rgb(0,0,256)" />
<circle id="G" class="draggable" r="5" cx="759.2023" cy="-66.12" fill="rgb(0,0,256)" />
<circle id="H" class="draggable" r="5" cx="329.3668" cy="-70.8599" fill="rgb(0,0,256)" />
<circle id="I" class="draggable" r="5" cx="645.2245" cy="439.0372" fill="rgb(0,0,256)" />
<circle id="J" class="draggable" r="5" cx="424.0614" cy="158.1991" fill="rgb(0,0,256)" />
<circle id="K" class="draggable" r="5" cx="848.4418" cy="-103.0553" fill="rgb(0,0,256)" />
<circle id="L" class="draggable" r="5" cx="348.5082" cy="-106.6205" fill="rgb(0,0,256)" />
<circle id="N" class="draggable" r="5" cx="848.2293" cy="196.6402" fill="rgb(0,0,256)" />
<circle id="P" class="draggable" r="5" cx="750.1753" cy="411.321" fill="rgb(0,0,256)" />
<circle id="Q" class="draggable" r="5" cx="513.6008" cy="-72.3347" fill="rgb(0,0,256)" />
<circle id="R" class="draggable" r="5" cx="745.1296" cy="-99.6828" fill="rgb(0,0,256)" />
<circle id="T" class="draggable" r="5" cx="659.8379" cy="477.6802" fill="rgb(0,0,256)" />
<circle id="U" class="draggable" r="5" cx="780.7058" cy="-83.7458" fill="rgb(0,0,256)" />
<circle id="V" class="draggable" r="5" cx="674.2095" cy="26.4124" fill="rgb(0,0,256)" />
<circle id="W" class="draggable" r="5" cx="714.4578" cy="254.8581" fill="rgb(0,0,256)" />
<circle id="X" class="draggable" r="5" cx="659.6737" cy="393.0083" fill="rgb(0,0,256)" />
<circle id="Y" class="draggable" r="5" cx="691.2788" cy="480.1045" fill="rgb(0,0,256)" />
<circle id="Z" class="draggable" r="5" cx="423.0769" cy="471.1429" fill="rgb(0,0,256)" />
<circle id="A1" class="draggable" r="5" cx="310.7074" cy="-14.6611" fill="rgb(0,0,256)" />
<circle id="B1" class="draggable" r="5" cx="684.2679" cy="301.8128" fill="rgb(0,0,256)" />
<circle id="C1" class="draggable" r="5" cx="843.8888" cy="478.4712" fill="rgb(0,0,256)" />
<circle id="D1" class="draggable" r="5" cx="524.2152" cy="261.526" fill="rgb(0,0,256)" />
<circle id="E1" class="draggable" r="5" cx="728.448" cy="3.0001" fill="rgb(0,0,256)" />
<circle id="F1" class="draggable" r="5" cx="366.7954" cy="193.8973" fill="rgb(0,0,256)" />
<circle id="G1" class="draggable" r="5" cx="528.4914" cy="96.0544" fill="rgb(0,0,256)" />
<circle id="H1" class="draggable" r="5" cx="693.353" cy="28.3208" fill="rgb(0,0,256)" />
<circle id="I1" class="draggable" r="5" cx="422.5157" cy="75.1858" fill="rgb(0,0,256)" />
<circle id="J1" class="draggable" r="5" cx="659.4363" cy="398.3677" fill="rgb(0,0,256)" />
<circle id="K1" class="draggable" r="5" cx="324.3736" cy="188.5225" fill="rgb(0,0,256)" />
<circle id="L1" class="draggable" r="5" cx="849.84" cy="287.2589" fill="rgb(0,0,256)" />
<circle id="M1" class="draggable" r="5" cx="615.7923" cy="360.1175" fill="rgb(0,0,256)" />
</g>

<script type="text/javascript" href="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.min.js"></script>
<script type="text/javascript"><![CDATA[
	
    let A = document.getElementById("A");
    let B = document.getElementById("B");
    let C = document.getElementById("C");
    
    function makeDraggable(evt) {
		var svg = evt.target;
		svg.addEventListener('mousedown', startDrag);
		svg.addEventListener('mousemove', drag);
		svg.addEventListener('mouseup', endDrag);
		svg.addEventListener('mouseleave', endDrag);
		let selectedElement;
		function startDrag(evt) {
			if (evt.target.classList.contains('draggable')) {
				selectedElement = evt.target;
				offset = getMousePosition(evt);
				offset.x -= parseFloat(selectedElement.getAttributeNS(null, 'cx'));
				offset.y -= parseFloat(selectedElement.getAttributeNS(null, 'cy'));
			}
		}
		function drag(evt) {
			if (selectedElement) {
				evt.preventDefault();
				let coord = getMousePosition(evt);
				selectedElement.setAttributeNS(null, 'cx', coord.x - offset.x);
				selectedElement.setAttributeNS(null, 'cy', coord.y - offset.y);
			}
		}
		function endDrag(evt) {
			selectedElement = null;
		}
		function getMousePosition(evt) {
			let CTM = svg.getScreenCTM();
			return {
				x: (evt.clientX - CTM.e) / CTM.a,
				y: (evt.clientY - CTM.f) / CTM.d
			};
		}
	}
const config = { attributes: true, childList: false, subtree: false };let temp;temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg1').setAttributeNS(null, 'x1', document.getElementById('A').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg1').setAttributeNS(null, 'x2', document.getElementById('B').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg1').setAttributeNS(null, 'y1', document.getElementById('A').getAttributeNS(null, mutation.attributeName));document.getElementById('seg1').setAttributeNS(null, 'y2', document.getElementById('B').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('A'), config);temp.observe(document.getElementById('B'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg2').setAttributeNS(null, 'x1', document.getElementById('B').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg2').setAttributeNS(null, 'x2', document.getElementById('C').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg2').setAttributeNS(null, 'y1', document.getElementById('B').getAttributeNS(null, mutation.attributeName));document.getElementById('seg2').setAttributeNS(null, 'y2', document.getElementById('C').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('B'), config);temp.observe(document.getElementById('C'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg3').setAttributeNS(null, 'x1', document.getElementById('C').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg3').setAttributeNS(null, 'x2', document.getElementById('A').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg3').setAttributeNS(null, 'y1', document.getElementById('C').getAttributeNS(null, mutation.attributeName));document.getElementById('seg3').setAttributeNS(null, 'y2', document.getElementById('A').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('C'), config);temp.observe(document.getElementById('A'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg4').setAttributeNS(null, 'x1', document.getElementById('A').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg4').setAttributeNS(null, 'x2', document.getElementById('D').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg4').setAttributeNS(null, 'y1', document.getElementById('A').getAttributeNS(null, mutation.attributeName));document.getElementById('seg4').setAttributeNS(null, 'y2', document.getElementById('D').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('A'), config);temp.observe(document.getElementById('D'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg5').setAttributeNS(null, 'x1', document.getElementById('B').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg5').setAttributeNS(null, 'x2', document.getElementById('E').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg5').setAttributeNS(null, 'y1', document.getElementById('B').getAttributeNS(null, mutation.attributeName));document.getElementById('seg5').setAttributeNS(null, 'y2', document.getElementById('E').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('B'), config);temp.observe(document.getElementById('E'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg6').setAttributeNS(null, 'x1', document.getElementById('C').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg6').setAttributeNS(null, 'x2', document.getElementById('F').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg6').setAttributeNS(null, 'y1', document.getElementById('C').getAttributeNS(null, mutation.attributeName));document.getElementById('seg6').setAttributeNS(null, 'y2', document.getElementById('F').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('C'), config);temp.observe(document.getElementById('F'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {
let a = math.matrixFromRows([document.getElementById('center1').getAttributeNS(null, 'cx'), document.getElementById('center1').getAttributeNS(null, 'cy')]);
let b = math.matrixFromRows([document.getElementById('A').getAttributeNS(null, 'cx'), document.getElementById('A').getAttributeNS(null, 'cy')]);
let c = math.subtract(a, b);
document.getElementById('dist1').setAttributeNS(null, 'value', math.sqrt(math.min(math.add(math.dotPow(math.column(c, 0),2), math.dotPow(math.column(c, 1),2)))));}}});
temp.observe(document.getElementById('center1'), config);temp.observe(document.getElementById('A'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {
document.getElementById('circ1').setAttributeNS(null, 'cx', document.getElementById('center1').getAttributeNS(null, 'cx'));
document.getElementById('circ1').setAttributeNS(null, 'cy', document.getElementById('center1').getAttributeNS(null, 'cy'));
document.getElementById('circ1').setAttributeNS(null, 'r', document.getElementById('dist1').getAttributeNS(null, 'value'));}}});
temp.observe(document.getElementById('center1'), config);temp.observe(document.getElementById('dist1'), config);

temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {
document.getElementById('circ2').setAttributeNS(null, 'cx', document.getElementById('O').getAttributeNS(null, 'cx'));
document.getElementById('circ2').setAttributeNS(null, 'cy', document.getElementById('O').getAttributeNS(null, 'cy'));
document.getElementById('circ2').setAttributeNS(null, 'r', document.getElementById('dist2').getAttributeNS(null, 'value'));}}});
temp.observe(document.getElementById('O'), config);temp.observe(document.getElementById('dist2'), config);
temp = new MutationObserver((mutationList, observer) => {for (const mutation of mutationList) {if (mutation.type === 'attributes') {if(mutation.attributeName === 'cx'){
document.getElementById('seg7').setAttributeNS(null, 'x1', document.getElementById('M').getAttributeNS(null, mutation.attributeName));
document.getElementById('seg7').setAttributeNS(null, 'x2', document.getElementById('center1').getAttributeNS(null, mutation.attributeName));
}if(mutation.attributeName === 'cy'){
document.getElementById('seg7').setAttributeNS(null, 'y1', document.getElementById('M').getAttributeNS(null, mutation.attributeName));document.getElementById('seg7').setAttributeNS(null, 'y2', document.getElementById('center1').getAttributeNS(null, mutation.attributeName));}}}});
temp.observe(document.getElementById('M'), config);temp.observe(document.getElementById('center1'), config);

var svgCanvas = document.getElementById("canvas");
console.log(svgCanvas.viewBox);
document.addEventListener('contextmenu', event => {event.preventDefault(); console.log(event.which)});
var svgCanvas = document.getElementById("canvas");
var viewPort = document.getElementById("viewport");

var drag = false;
var offset = { x: 0, y: 0 };
var factor = .1;
var matrix = new DOMMatrix();

svgCanvas.addEventListener('pointerdown', function (event) {
    if(event.which !== 3){return;}
    drag = true;
    offset = { x: event.offsetX, y: event.offsetY };
});

svgCanvas.addEventListener('pointermove', function (event) {
    if (drag) {
        var tx = event.offsetX - offset.x;
        var ty = event.offsetY - offset.y;
        offset = {
            x: event.offsetX,
            y: event.offsetY
        };
        matrix.preMultiplySelf(new DOMMatrix()
            .translateSelf(tx, ty));
        viewPort.style.transform = matrix.toString();
    }
});

svgCanvas.addEventListener('pointerup', function (event) {
    drag = false;
});

svgCanvas.addEventListener('wheel', function (event) {
    var zoom = event.deltaY > 0 ? -1 : 1;
    var scale = 1 + factor * zoom;
    offset = {
        x: event.offsetX,
        y: event.offsetY
    };
    matrix.preMultiplySelf(new DOMMatrix()
        .translateSelf(offset.x, offset.y)
        .scaleSelf(scale, scale)
        .translateSelf(-offset.x, -offset.y));
    viewPort.style.transform = matrix.toString();
});

]]></script>
</svg>